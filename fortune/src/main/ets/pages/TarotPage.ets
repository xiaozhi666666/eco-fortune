import router from '@ohos.router';

@Entry
@Component
struct TarotPage {
  @State showResult: boolean = false;
  @State resultText: string = '';
  @State cardName: string = '';

  drawCard() {
    const cards = ['æ„šè€…', 'é­”æœ¯å¸ˆ', 'å¥³ç¥­å¸', 'çš‡åŽ', 'çš‡å¸', 'æ‹äºº', 'æˆ˜è½¦', 'åŠ›é‡', 'éšå£«', 'å‘½è¿ä¹‹è½®'];
    const meanings = [
      "æ„šè€…ç‰Œä»£è¡¨æ–°çš„å¼€å§‹å’Œæ— é™å¯èƒ½ã€‚æ‚¨æ­£å¤„åœ¨äººç”Ÿçš„æ–°èµ·ç‚¹ï¼Œå‹‡æ•¢è¸å‡ºç¬¬ä¸€æ­¥å§ï¼",
      "é­”æœ¯å¸ˆè±¡å¾åˆ›é€ åŠ›å’Œæ„å¿—åŠ›ã€‚çŽ°åœ¨æ˜¯å®žçŽ°æ¢¦æƒ³çš„æœ€ä½³æ—¶æœºï¼Œç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ã€‚",
      "å¥³ç¥­å¸ä»£è¡¨ç›´è§‰å’Œå†…åœ¨æ™ºæ…§ã€‚å¬ä»Žå†…å¿ƒçš„å£°éŸ³ï¼Œå®ƒä¼šä¸ºæ‚¨æŒ‡å¼•æ­£ç¡®çš„æ–¹å‘ã€‚",
      "çš‡åŽç‰Œè±¡å¾åˆ›é€ åŠ›å’Œæ¯æ€§å…³æ€€ã€‚æ‚¨çš„æ¸©æŸ”å’ŒåŒ…å®¹ä¼šä¸ºæ‚¨å¸¦æ¥å¥½è¿ã€‚",
      "çš‡å¸ä»£è¡¨æƒå¨å’Œç¨³å®šã€‚å»ºç«‹ç¨³å›ºçš„åŸºç¡€ï¼ŒæˆåŠŸå°†ä¼šåˆ°æ¥ã€‚"
    ];
    
    const randomIndex = Math.floor(Math.random() * cards.length);
    this.cardName = cards[randomIndex];
    this.resultText = meanings[Math.min(randomIndex, meanings.length - 1)];
    this.showResult = true;
  }

  build() {
    Column() {
      // é¡¶éƒ¨å¯¼èˆª
      Row() {
        Button('â†')
          .fontSize(24)
          .backgroundColor(Color.Transparent)
          .fontColor('#ffd700')
          .onClick(() => {
            router.back()
          })
        
        Text('å¡”ç½—å åœ')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#ffffff')
          .layoutWeight(1)
          .textAlign(TextAlign.Center)
        
        Text('   ')
          .fontSize(24)
      }
      .width('100%')
      .padding(20)
      
      if (!this.showResult) {
        Column({ space: 40 }) {
          Text('ç¥žç§˜å¡”ç½—ç‰Œ')
            .fontSize(24)
            .fontColor('#ffd700')
            .margin({ top: 50 })
          
          Text('ðŸƒ')
            .fontSize(120)
            .margin({ top: 40, bottom: 40 })
          
          Text('é™å¿ƒå†¥æƒ³ï¼Œç‚¹å‡»æŠ½å–æ‚¨çš„å¡”ç½—ç‰Œ')
            .fontSize(16)
            .fontColor('#cccccc')
            .textAlign(TextAlign.Center)
            .width('80%')
          
          Button('æŠ½å–å¡”ç½—ç‰Œ')
            .width('60%')
            .height(50)
            .fontSize(18)
            .backgroundColor('#ffd700')
            .fontColor('#1a1a2e')
            .borderRadius(25)
            .onClick(() => {
              this.drawCard();
            })
        }
        .width('100%')
        .justifyContent(FlexAlign.Center)
      } else {
        Scroll() {
          Column({ space: 20 }) {
            Text('å¡”ç½—ç‰Œå åœç»“æžœ')
              .fontSize(24)
              .fontWeight(FontWeight.Bold)
              .fontColor('#ffd700')
              .margin({ top: 30 })
            
            Text('ðŸƒ')
              .fontSize(80)
              .margin({ top: 20, bottom: 20 })
            
            Text(this.cardName)
              .fontSize(20)
              .fontColor('#ffffff')
              .fontWeight(FontWeight.Bold)
            
            Column() {
              Text(this.resultText)
                .fontSize(16)
                .fontColor('#cccccc')
                .lineHeight(24)
                .textAlign(TextAlign.Start)
                .padding(20)
            }
            .width('90%')
            .backgroundColor('#533483')
            .borderRadius(15)
            
            Row({ space: 15 }) {
              Button('ä¿å­˜è®°å½•')
                .layoutWeight(1)
                .height(45)
                .backgroundColor('#0f3460')
                .fontColor('#ffffff')
                .borderRadius(22)
              
              Button('åˆ†äº«ç»“æžœ')
                .layoutWeight(1)
                .height(45)
                .backgroundColor('#ffd700')
                .fontColor('#1a1a2e')
                .borderRadius(22)
            }
            .width('90%')
            .margin({ top: 20 })
            
            Button('é‡æ–°æŠ½ç‰Œ')
              .width('60%')
              .height(45)
              .fontSize(16)
              .backgroundColor('#16213e')
              .fontColor('#ffd700')
              .borderRadius(22)
              .margin({ top: 20 })
              .onClick(() => {
                this.showResult = false;
              })
          }
          .width('100%')
          .padding(20)
        }
        .layoutWeight(1)
      }
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#1a1a2e')
  }
}