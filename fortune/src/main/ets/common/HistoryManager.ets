export interface HistoryItem {
  id: string;
  type: string;
  title: string;
  content: string;
  timestamp: string;
}

export class HistoryManager {
  private static instance: HistoryManager;
  private historyList: HistoryItem[] = [
    {
      id: '1',
      type: 'name',
      title: 'ğŸ“ å¼ ä¸‰çš„å§“ååˆ†æ',
      content: 'æ‚¨çš„å§“åæ•°ç†å¾ˆå¥½ï¼Œå¯“æ„å‰ç¥¥å¦‚æ„ã€‚',
      timestamp: '1æœˆ15æ—¥'
    },
    {
      id: '2',
      type: 'zodiac',
      title: 'â­ ç™½ç¾Šåº§ä»Šæ—¥è¿åŠ¿',
      content: 'ä»Šæ—¥è¿åŠ¿æä½³ï¼Œæ˜¯å±•ç°æ‰åçš„å¥½æ—¶æœºã€‚',
      timestamp: '1æœˆ14æ—¥'
    },
    {
      id: '3',
      type: 'bazi',
      title: 'ğŸ”® æå››çš„å…«å­—ç®—å‘½',
      content: 'æ‚¨å‘½ä¸­è´µäººç›¸åŠ©ï¼Œäº‹ä¸šæœ‰æˆã€‚',
      timestamp: '1æœˆ13æ—¥'
    },
    {
      id: '4',
      type: 'tarot',
      title: 'ğŸƒ å¡”ç½—ç‰Œå åœç»“æœ',
      content: 'æ„šè€…ç‰Œä»£è¡¨æ–°çš„å¼€å§‹å’Œæ— é™å¯èƒ½ã€‚',
      timestamp: '1æœˆ12æ—¥'
    },
    {
      id: '5',
      type: 'phone',
      title: 'ğŸ“± 138****8888å·ç åˆ†æ',
      content: 'æ‚¨çš„æ‰‹æœºå·ç æ•´ä½“èƒ½é‡å¹³è¡¡ã€‚',
      timestamp: '1æœˆ11æ—¥'
    }
  ];
  
  public static getInstance(): HistoryManager {
    if (!HistoryManager.instance) {
      HistoryManager.instance = new HistoryManager();
    }
    return HistoryManager.instance;
  }
  
  public getHistoryList(): HistoryItem[] {
    return [...this.historyList];
  }
  
  public addHistory(type: string, title: string, content: string): void {
    const newItem: HistoryItem = {
      id: Date.now().toString(),
      type: type,
      title: title,
      content: content,
      timestamp: this.getCurrentDate()
    };
    
    this.historyList.unshift(newItem);
    console.info('æ·»åŠ å†å²è®°å½•ï¼š', newItem);
  }
  
  public deleteHistory(id: string): void {
    const index = this.historyList.findIndex(item => item.id === id);
    if (index !== -1) {
      this.historyList.splice(index, 1);
      console.info('åˆ é™¤å†å²è®°å½•ï¼š', id);
    }
  }
  
  public clearAllHistory(): void {
    this.historyList = [];
    console.info('æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•');
  }
  
  private getCurrentDate(): string {
    const now = new Date();
    const month = now.getMonth() + 1;
    const day = now.getDate();
    return `${month}æœˆ${day}æ—¥`;
  }
}